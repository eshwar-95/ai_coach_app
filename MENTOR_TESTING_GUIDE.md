# Quick Start: Testing the Mentor Request System

## Demo Credentials

Use these credentials to test both mentee and mentor workflows:

| Role | Username | Email | Password |
|------|----------|-------|----------|
| Mentee | jane_mentee | jane_mentee@example.com | password |
| Mentor | john_mentor | john_mentor@example.com | pwd |

## Test Workflow (5 minutes)

### Part 1: Mentee Creates Plan and Requests Mentor

1. **Start App**
   ```bash
   cd c:\workspace\ai_coach_app
   streamlit run app.py
   ```
   Opens in browser at `http://localhost:8501`

2. **Login as Mentee**
   - Username: `jane_mentee`
   - Password: `password`
   - Click "Sign In"

3. **Follow Chatbot Steps**
   - Step 1: Enter name (e.g., "Jane")
   - Step 2: Enter age (e.g., "28")
   - Step 3: Select skills (e.g., check Python, Data Analysis)
   - Step 4: Enter interests (e.g., "machine learning")
   - Step 5: Review and confirm
   - Click "Generate Upskilling Plan"

4. **View Recommendations**
   - See upskilling plan generated by AI
   - Scroll down to "üë®‚Äçüè´ Recommended Mentors"
   - See mentor recommendations (John Smith, etc.)

5. **Request Mentor**
   - Click "ü§ù Connect with Mentor" button next to desired mentor
   - See: "‚úÖ Connection request sent to [Mentor Name]!"
   - See balloons animation üéâ
   - Request saved to Databricks SQL

### Part 2: Mentor Reviews and Accepts Request

6. **Logout Mentee**
   - Click "Logout" button (top right)
   - Confirm logout

7. **Login as Mentor**
   - Username: `john_mentor`
   - Password: `pwd`
   - Click "Sign In"

8. **View Mentor Dashboard**
   - Auto-displays mentor dashboard (instead of chatbot)
   - See "üëã Welcome, John Smith"
   - See "### Mentor Dashboard"

9. **View Pending Requests**
   - Look for "üîî Pending Mentee Requests" section
   - Should see the mentee request:
     - Name: Jane (or whatever name entered)
     - Email: jane_mentee@example.com
     - Requested: [timestamp]

10. **Accept Request**
    - Click "‚úÖ Accept" button
    - See: "‚úÖ Accepted request from Jane!"
    - Page reloads

11. **Verify Acceptance**
    - Scroll to "‚úÖ Active Mentee Connections"
    - See the mentee now appears there
    - Request moved from pending to accepted

## Testing the Rejection Path (Optional)

1. **As Mentee** (steps 2-5 above)
   - Create another mentee user/plan with different name
   - Request same mentor

2. **As Mentor** (steps 7-8)
   - Should see second request in pending
   - Click "‚ùå Reject" button
   - Request disappears from pending

3. **Verify Rejection**
   - Check statistics at top
   - "Pending Requests" count should decrease

## Checking Data Persistence

### View SQL Data
Run this Python script to see stored requests:

```python
from src.databricks_sql import DatabricksSQLClient

client = DatabricksSQLClient()
requests = client.get_mentor_requests("john_mentor@example.com")
for req in requests:
    print(f"- {req['mentee_name']}: {req['status']}")
```

### View CSV Fallback Data
If SQL unavailable, data is stored in:
```
data/mentor_requests.csv
```

Open in Excel to view all requests (id, mentee_email, status, etc.)

## Expected Behaviors

‚úÖ **Mentee Side:**
- Can request mentor connections
- Sees confirmation message
- Request saved immediately

‚úÖ **Mentor Side:**
- Sees pending requests instantly
- Can accept/reject with one click
- Sees updated statistics
- Accepted mentees move to separate section
- Requests persist between sessions

‚úÖ **Database:**
- Requests stored in `hackathon.default.mentor_requests` SQL table
- Fallback to CSV if SQL unavailable
- Timestamps recorded automatically
- Status changes tracked

## Troubleshooting

| Issue | Solution |
|-------|----------|
| No mentors showing | Make sure you selected skills/interests in chatbot |
| "Could not send request" | SQL connection down; check `.env` credentials; data falls back to CSV |
| Requests not showing for mentor | Log out/in to refresh; check exact email matches |
| Button clicks not working | Make sure you're not in the middle of typing in form fields |

## Files to Review

- **Main App:** `app.py`
- **SQL Client:** `src/databricks_sql.py` (mentor request methods)
- **Test Scripts:**
  - `test_mentor_requests.py` - Unit tests
  - `test_e2e_workflow.py` - End-to-end test
- **Documentation:** `MENTOR_REQUEST_SYSTEM.md` - Full technical details

## Summary of Features Tested

1. ‚úÖ Mentee creates upskilling plan
2. ‚úÖ Mentee sends mentor connection request
3. ‚úÖ Mentor receives request
4. ‚úÖ Mentor can accept request
5. ‚úÖ Mentor can reject request
6. ‚úÖ Status changes persist
7. ‚úÖ Data stored in Databricks SQL
8. ‚úÖ Fallback to CSV if needed
9. ‚úÖ Statistics updated correctly
10. ‚úÖ UI responsive and user-friendly

---

**Ready to test!** Follow the workflow above and the mentor request system should work smoothly. Check the console output or log files if any issues occur.
